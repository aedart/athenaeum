import{_ as e,M as p,p as t,q as o,R as n,t as s,N as c,a1 as i}from"./framework-efe98465.js";const r={},l=n("h1",{id:"project-memberships",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#project-memberships","aria-hidden":"true"},"#"),s(" Project Memberships")],-1),u=n("p",null,"As you might know, you are only able to assign an issue to a user or a group, if that user or group is member of the project in which the issue has been assigned to. This section briefly highlights how to add or change project memberships.",-1),d=n("h2",{id:"add-user-membership",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#add-user-membership","aria-hidden":"true"},"#"),s(" Add user membership")],-1),k=n("code",null,"addUserMember()",-1),m={href:"https://www.redmine.org/projects/redmine/wiki/Rest_Roles",target:"_blank",rel:"noopener noreferrer"},b=i(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Redmine<span class="token punctuation">\\</span>Project</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Redmine<span class="token punctuation">\\</span>Role</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Redmine<span class="token punctuation">\\</span>User</span><span class="token punctuation">;</span>

<span class="token comment">// Obtain user and role by ids</span>
<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$reviewer</span> <span class="token operator">=</span> <span class="token class-name static-context">Role</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Find project by identifier</span>
<span class="token variable">$project</span> <span class="token operator">=</span> <span class="token class-name static-context">Project</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;deus-ex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add user as member of project</span>
<span class="token variable">$membership</span> <span class="token operator">=</span> <span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token function">addUserMember</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token variable">$reviewer</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="add-group-membership" tabindex="-1"><a class="header-anchor" href="#add-group-membership" aria-hidden="true">#</a> Add group membership</h2><p>A similar approach is true, for addtion a group of users as project members.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Redmine<span class="token punctuation">\\</span>Project</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Redmine<span class="token punctuation">\\</span>Role</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Redmine<span class="token punctuation">\\</span>Group</span><span class="token punctuation">;</span>

<span class="token comment">// Obtain group and role...</span>
<span class="token variable">$group</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$reviewer</span> <span class="token operator">=</span> <span class="token class-name static-context">Role</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Find project by identifier</span>
<span class="token variable">$project</span> <span class="token operator">=</span> <span class="token class-name static-context">Project</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;deus-ex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add group as member of project</span>
<span class="token variable">$membership</span> <span class="token operator">=</span> <span class="token variable">$project</span><span class="token operator">-&gt;</span><span class="token function">addGroupMember</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token variable">$reviewer</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="get-project-members" tabindex="-1"><a class="header-anchor" href="#get-project-members" aria-hidden="true">#</a> Get project members</h2><p>To obtain a list of project members, use the <code>members()</code> relation method, on a given project.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$members</span> <span class="token operator">=</span> <span class="token variable">$projet</span>
    <span class="token operator">-&gt;</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="remove-a-member" tabindex="-1"><a class="header-anchor" href="#remove-a-member" aria-hidden="true">#</a> Remove a member</h2><p>Invoke the <code>delete()</code> on the membership instance, when you wish to remove it from a project.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$member</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="distinguish-between-user-and-group-member" tabindex="-1"><a class="header-anchor" href="#distinguish-between-user-and-group-member" aria-hidden="true">#</a> Distinguish between user and group member</h2><p>The <code>ProjectMembership</code> resource offers a few utilities that allow you to distinguish whether the membership is for a user or a group of users.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$membership</span><span class="token operator">-&gt;</span><span class="token function">isUserMembership</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token variable">$membership</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment">// ...do something with user membership</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...Or </span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$membership</span><span class="token operator">-&gt;</span><span class="token function">isGroupMembership</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$group</span> <span class="token operator">=</span> <span class="token variable">$membership</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// ...do something with group membership</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13);function v(h,g){const a=p("ExternalLinkIcon");return t(),o("div",null,[l,u,d,n("p",null,[s("Given you already have an existing project and must add a new user as a member of the project, you can use the "),k,s(" method. The prerequisite, however, is that you also know the "),n("a",m,[s("role"),c(a)]),s(" that user must be given.")]),b])}const w=e(r,[["render",v],["__file","memberships.html.vue"]]);export{w as default};
