import{_ as l,M as p,p as r,q as c,R as s,N as a,U as t,t as n,a1 as i}from"./framework-efe98465.js";const u={},d=s("h1",{id:"roles",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#roles","aria-hidden":"true"},"#"),n(" Roles")],-1),g=s("p",null,"Roles are the responsible for grouping granted permissions. A role has be assigned to one or more users and thereby granting the users whatever permissions are granted to the role itself.",-1),k={class:"table-of-contents"},h=i(`<h2 id="creating-a-new-role" tabindex="-1"><a class="header-anchor" href="#creating-a-new-role" aria-hidden="true">#</a> Creating a new role</h2><p>To create a new role, you can use the static <code>create()</code> method, as you normally would in your Eloquent model.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Acl<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Role</span><span class="token punctuation">;</span>

<span class="token variable">$manager</span> <span class="token operator">=</span> <span class="token class-name static-context">Role</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;slug&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;flight-manager&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Flight manager&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;description&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Responsible for managing flight records&#39;</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),m={href:"https://laravel.com/docs/11.x/eloquent#inserting-and-updating-models",target:"_blank",rel:"noopener noreferrer"},v=i(`<h3 id="new-role-with-permissions" tabindex="-1"><a class="header-anchor" href="#new-role-with-permissions" aria-hidden="true">#</a> New role with permissions</h3><p>If you already know which permissions a new role should be granted, then you can define these right away, during the role&#39;s creation. This is done so, via the <code>createWithPermissions()</code> method.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Acl<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Permissions<span class="token punctuation">\\</span>Group</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Acl<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Role</span><span class="token punctuation">;</span> 

<span class="token variable">$permissions</span> <span class="token operator">=</span> <span class="token class-name static-context">Group</span><span class="token operator">::</span><span class="token function">findBySlug</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;flights&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">permissions</span><span class="token punctuation">;</span>

<span class="token variable">$manager</span> <span class="token operator">=</span> <span class="token class-name static-context">Role</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;slug&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;flight-manager&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Flight manager&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;description&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Responsible for managing flight records&#39;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$permissions</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="grant-permissions" tabindex="-1"><a class="header-anchor" href="#grant-permissions" aria-hidden="true">#</a> Grant permissions</h2><p>The <code>grantPermissions()</code> method allows you to grant one or more permissions to the given role. The method can accept multiple types of permission identifiers:</p><ul><li><code>string</code>: permission&#39;s unique slug</li><li><code>int</code>: permissions unique id (<em>integer</em>)</li><li><code>Permission</code>: instance of Permission model</li><li><code>Collection</code>: a collection of permission models</li><li><code>array</code>: list of permission slugs, ids or models</li></ul><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$role</span> <span class="token operator">=</span> <span class="token class-name static-context">Role</span><span class="token operator">::</span><span class="token function">findBySlug</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;flight-manager&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">grantPermissions</span><span class="token punctuation">(</span><span class="token variable">$permissions</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ... Or via array...</span>

<span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">grantPermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">&#39;flights.index&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;flights.show&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;flights.store&#39;</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ... Or single permission via slug</span>

<span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">grantPermissions</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;flights.destroy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="revoke-permissions" tabindex="-1"><a class="header-anchor" href="#revoke-permissions" aria-hidden="true">#</a> Revoke permissions</h2><p>To revoke permissions from an existing role, use the <code>revokePermissions()</code> method. It accepts the same type of arguments as the <code>grantPermissions()</code> method.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">revokePermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">&#39;flights.update&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;flights.destroy&#39;</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="revoking-all-permissions" tabindex="-1"><a class="header-anchor" href="#revoking-all-permissions" aria-hidden="true">#</a> Revoking all permissions</h3><p>Use the <code>revokeAllPermissions()</code> method to revoke all permissions for given role.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">revokeAllPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="synchronise-permissions" tabindex="-1"><a class="header-anchor" href="#synchronise-permissions" aria-hidden="true">#</a> Synchronise permissions</h2><p>If you require synchronising granted permissions, then use the <code>syncPermissions()</code> method.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// Regardless of what permissions previously were granted,</span>
<span class="token comment">// the role will now only be granted the given permissions...</span>
<span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">syncPermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;flights.index&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;flights.show&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;flights.store&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,16),b={href:"https://laravel.com/docs/11.x/eloquent-relationships#syncing-associations",target:"_blank",rel:"noopener noreferrer"},f=i(`<h2 id="update-role-with-permissions" tabindex="-1"><a class="header-anchor" href="#update-role-with-permissions" aria-hidden="true">#</a> Update role with permissions</h2><p>To update a role&#39;s attributes and also grant it permissions, use the <code>updateAndGrantPermissions()</code> method.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$permissions</span> <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string single-quoted-string">&#39;flights.index&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;flights.show&#39;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$role</span> <span class="token operator">=</span> <span class="token class-name static-context">Role</span><span class="token operator">::</span><span class="token function">findBySlug</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;flight-manager&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">updateAndGrantPermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;description&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Responsible for supervising flight records&#39;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$permissions</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="update-and-synchronise-permissions" tabindex="-1"><a class="header-anchor" href="#update-and-synchronise-permissions" aria-hidden="true">#</a> Update and synchronise permissions</h3><p>Alternatively, you may also synchronise permissions when updating an existing role.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$permissions</span> <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string single-quoted-string">&#39;flights.index&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;flights.show&#39;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$role</span> <span class="token operator">=</span> <span class="token class-name static-context">Role</span><span class="token operator">::</span><span class="token function">findBySlug</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;flight-manager&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">updateAndSyncPermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;description&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Responsible for supervising flight records&#39;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$permissions</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="check-role-s-permissions" tabindex="-1"><a class="header-anchor" href="#check-role-s-permissions" aria-hidden="true">#</a> Check role&#39;s permissions</h2><p>When you need to determine whether a role has specific permissions or not, then the following methods can be used.</p><h3 id="has-permission" tabindex="-1"><a class="header-anchor" href="#has-permission" aria-hidden="true">#</a> Has permission</h3><p>The <code>hasPermission()</code> method returns <code>true</code>, if given permission are granted to the role.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">echo</span> <span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">hasPermission</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;flights.update&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// e.g. false (0)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="has-all-permissions" tabindex="-1"><a class="header-anchor" href="#has-all-permissions" aria-hidden="true">#</a> Has all permissions</h3><p>To determine if a role has multiple permissions granted, use the <code>hasAllPermissions()</code>. The method only returns <code>true</code>, if all given permissions are granted.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">echo</span> <span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">hasAllPermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">&#39;flights.destroy&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;flights.store&#39;</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// e.g. true (1)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="has-any-permissions" tabindex="-1"><a class="header-anchor" href="#has-any-permissions" aria-hidden="true">#</a> Has any permissions</h3><p>Lastly, to determine if a role has either (<em>one of</em>) of given permissions, use the <code>hasAnyPermissions()</code> method.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// Returns true if either permission is granted</span>
<span class="token keyword">echo</span> <span class="token variable">$role</span><span class="token operator">-&gt;</span><span class="token function">hasAnyPermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">&#39;flights.index&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;flights.show&#39;</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// e.g. true (1)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,17);function y(w,_){const e=p("router-link"),o=p("ExternalLinkIcon");return r(),c("div",null,[d,g,s("nav",k,[s("ul",null,[s("li",null,[a(e,{to:"#creating-a-new-role"},{default:t(()=>[n("Creating a new role")]),_:1}),s("ul",null,[s("li",null,[a(e,{to:"#new-role-with-permissions"},{default:t(()=>[n("New role with permissions")]),_:1})])])]),s("li",null,[a(e,{to:"#grant-permissions"},{default:t(()=>[n("Grant permissions")]),_:1})]),s("li",null,[a(e,{to:"#revoke-permissions"},{default:t(()=>[n("Revoke permissions")]),_:1}),s("ul",null,[s("li",null,[a(e,{to:"#revoking-all-permissions"},{default:t(()=>[n("Revoking all permissions")]),_:1})])])]),s("li",null,[a(e,{to:"#synchronise-permissions"},{default:t(()=>[n("Synchronise permissions")]),_:1})]),s("li",null,[a(e,{to:"#update-role-with-permissions"},{default:t(()=>[n("Update role with permissions")]),_:1}),s("ul",null,[s("li",null,[a(e,{to:"#update-and-synchronise-permissions"},{default:t(()=>[n("Update and synchronise permissions")]),_:1})])])]),s("li",null,[a(e,{to:"#check-role-s-permissions"},{default:t(()=>[n("Check role's permissions")]),_:1}),s("ul",null,[s("li",null,[a(e,{to:"#has-permission"},{default:t(()=>[n("Has permission")]),_:1})]),s("li",null,[a(e,{to:"#has-all-permissions"},{default:t(()=>[n("Has all permissions")]),_:1})]),s("li",null,[a(e,{to:"#has-any-permissions"},{default:t(()=>[n("Has any permissions")]),_:1})])])])])]),h,s("p",null,[n("See Laravel's "),s("a",m,[n("documentation"),a(o)]),n(" for additional information on how to create new records.")]),v,s("p",null,[n("For additional information about relations synchronisation, please review Laravel's "),s("a",b,[n("documentation"),a(o)]),n(".")]),f])}const q=l(u,[["render",y],["__file","roles.html.vue"]]);export{q as default};
