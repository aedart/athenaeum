import{_ as o,M as p,p as c,q as i,R as s,t as n,N as t,a1 as e}from"./framework-efe98465.js";const l={},u=s("h1",{id:"failed-login-attempt",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#failed-login-attempt","aria-hidden":"true"},"#"),n(" Failed Login Attempt")],-1),r=s("code",null,"FailedLoginAttempt",-1),d={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401",target:"_blank",rel:"noopener noreferrer"},k={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422",target:"_blank",rel:"noopener noreferrer"},m=e(`<p>The exception can be used in combination with a custom &quot;attempt to authenticate&quot; action (<em>see example below</em>).</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Auth<span class="token punctuation">\\</span>Fortify<span class="token punctuation">\\</span>Exceptions<span class="token punctuation">\\</span>FailedLoginAttempt</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\\</span>Fortify<span class="token punctuation">\\</span>Actions<span class="token punctuation">\\</span>AttemptToAuthenticate</span> <span class="token keyword">as</span> BaseAttemptToAuthenticate<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\\</span>Fortify<span class="token punctuation">\\</span>Fortify</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">AttemptToAuthenticate</span> <span class="token keyword">extends</span> <span class="token class-name">BaseAttemptToAuthenticate</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">throwFailedAuthenticationException</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">limiter</span><span class="token operator">-&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">throw</span> <span class="token class-name static-context">FailedLoginAttempt</span><span class="token operator">::</span><span class="token function">withMessages</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token class-name static-context">Fortify</span><span class="token operator">::</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token function">trans</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;auth.failed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),v={href:"https://laravel.com/docs/12.x/fortify#customizing-the-authentication-pipeline",target:"_blank",rel:"noopener noreferrer"},h=e(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Fortify</span><span class="token operator">::</span><span class="token function">authenticateThrough</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">array_filter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token comment">// ...previous actions not shown...</span>
        
        <span class="token class-name static-context">AttemptToAuthenticate</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name static-context">PrepareAuthenticatedSession</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function f(b,g){const a=p("ExternalLinkIcon");return c(),i("div",null,[u,s("p",null,[n("The "),r,n(" exception is an alternative to Laravel's default validation exception that is thrown, on unsuccessful login attempts. The custom exception ensures that an HTTP "),s("a",d,[n('"401 Unauthorized"'),t(a)]),n(" response is sent back to a client, instead of a "),s("a",k,[n('"422 Unprocessable Content"'),t(a)]),n(".")]),m,s("p",null,[n("To use such an action, you will have to modify Laravel Fortify's default "),s("a",v,[n("authentication pipeline"),t(a)]),n(".")]),h])}const y=o(l,[["render",f],["__file","failed-login-attempt.html.vue"]]);export{y as default};
