import{_ as e,M as t,p as o,q as p,R as a,t as s,N as i,a1 as c}from"./framework-efe98465.js";const l={},r=a("h1",{id:"issue-relations",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#issue-relations","aria-hidden":"true"},"#"),s(" Issue Relations")],-1),u={href:"https://www.redmine.org/projects/redmine/wiki/Rest_IssueRelations",target:"_blank",rel:"noopener noreferrer"},d=c(`<h2 id="create-new-relation" tabindex="-1"><a class="header-anchor" href="#create-new-relation" aria-hidden="true">#</a> Create new relation</h2><p>The easiest way to relate an issue with another, is by using the <code>addRelation()</code> method, in the <code>Issue</code> resource.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$issueA</span> <span class="token operator">=</span> <span class="token class-name static-context">Issue</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">2254</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$issueB</span> <span class="token operator">=</span> <span class="token class-name static-context">Issue</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">8741</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$relation</span> <span class="token operator">=</span> <span class="token variable">$issueA</span><span class="token operator">-&gt;</span><span class="token function">addRelation</span><span class="token punctuation">(</span><span class="token variable">$issueA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In the example shown above, issue A is related with issue B. The resulting output of the <code>addRelation()</code> method, is a <code>Relation</code> resource, containing details about the issue association.</p><h3 id="specify-type-of-relation" tabindex="-1"><a class="header-anchor" href="#specify-type-of-relation" aria-hidden="true">#</a> Specify type of relation</h3><p>You may also specify the type of the relation, by using the 2nd argument.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Redmine<span class="token punctuation">\\</span>Relation</span><span class="token punctuation">;</span>

<span class="token variable">$issueA</span> <span class="token operator">=</span> <span class="token class-name static-context">Issue</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">2254</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$issueB</span> <span class="token operator">=</span> <span class="token class-name static-context">Issue</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">8741</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$relation</span> <span class="token operator">=</span> <span class="token variable">$issueA</span><span class="token operator">-&gt;</span><span class="token function">addRelation</span><span class="token punctuation">(</span><span class="token variable">$issueA</span><span class="token punctuation">,</span> <span class="token class-name static-context">Relation</span><span class="token operator">::</span><span class="token constant">DUPLICATES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Note</strong>: <em>When type of relation is not specified, then <code>Relation::RELATES</code> is used as the default relation type.</em></p><h3 id="specify-delay" tabindex="-1"><a class="header-anchor" href="#specify-delay" aria-hidden="true">#</a> Specify &quot;Delay&quot;</h3><p>The <code>Relation::PRECEDES</code> or <code>Relation::FOLLOWS</code> relation types accept an additional &quot;delay&quot; argument. The 3rd argument can be used for stating the delay in amount of days.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$relation</span> <span class="token operator">=</span> <span class="token variable">$issueA</span><span class="token operator">-&gt;</span><span class="token function">addRelation</span><span class="token punctuation">(</span><span class="token variable">$issueA</span><span class="token punctuation">,</span> <span class="token class-name static-context">Relation</span><span class="token operator">::</span><span class="token constant">FOLLOWS</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="fetch-existing-relations" tabindex="-1"><a class="header-anchor" href="#fetch-existing-relations" aria-hidden="true">#</a> Fetch existing relations</h2><p>To fetch an issue with all of it&#39;s relations, you must include &quot;relations&quot;, when fetching an issue.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$issue</span> <span class="token operator">=</span> <span class="token class-name static-context">Issue</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token string single-quoted-string">&#39;relations&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$relations</span> <span class="token operator">=</span> <span class="token variable">$issue</span><span class="token operator">-&gt;</span><span class="token property">relations</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$relations</span> <span class="token keyword">as</span> <span class="token variable">$relation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$relation</span><span class="token operator">-&gt;</span><span class="token property">relation_type</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="delete-relation" tabindex="-1"><a class="header-anchor" href="#delete-relation" aria-hidden="true">#</a> Delete relation</h2><p>Once you have obtained a relation, you can simply invoke the <code>delete()</code> method to remove the relation between two issues.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$relation</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,17);function k(h,v){const n=t("ExternalLinkIcon");return o(),p("div",null,[r,a("p",null,[s("In this context, an issue relation resource is what defines how an issue is related to one or more issues. See "),a("a",u,[s("Redmine docs."),i(n)]),s(" for details.")]),d])}const b=e(l,[["render",k],["__file","issue_relations.html.vue"]]);export{b as default};
