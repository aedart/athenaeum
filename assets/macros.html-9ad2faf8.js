import{_ as i,M as p,p as l,q as r,R as n,t as s,N as a,U as o,a1 as c}from"./framework-efe98465.js";const d={},u=n("h1",{id:"request-response-macros",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#request-response-macros","aria-hidden":"true"},"#"),s(" Request / Response Macros")],-1),h={href:"https://laravel.com/docs/9.x/responses#response-macros",target:"_blank",rel:"noopener noreferrer"},k={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Conditional_requests#conditional_headers",target:"_blank",rel:"noopener noreferrer"},m={class:"table-of-contents"},f=n("h2",{id:"request-macros",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#request-macros","aria-hidden":"true"},"#"),s(" Request Macros")],-1),g=n("h3",{id:"ifmatchetags",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ifmatchetags","aria-hidden":"true"},"#"),s(),n("code",null,"ifMatchEtags()")],-1),v=n("code",null,"ifMatchEtags()",-1),_=n("code",null,"ETag",-1),b={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Match",target:"_blank",rel:"noopener noreferrer"},w=n("code",null,"If-Match",-1),T=c(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$collection</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">ifMatchEtags</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$collection</span><span class="token operator">-&gt;</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...remaining not shown ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ifnonematchetags" tabindex="-1"><a class="header-anchor" href="#ifnonematchetags" aria-hidden="true">#</a> <code>ifNoneMatchEtags()</code></h3>`,2),E=n("code",null,"ETag",-1),y={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match",target:"_blank",rel:"noopener noreferrer"},x=n("code",null,"If-None-Match",-1),R=c(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$collection</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">ifNoneMatchEtags</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$collection</span><span class="token operator">-&gt;</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...remaining not shown ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ifmodifiedsincedate" tabindex="-1"><a class="header-anchor" href="#ifmodifiedsincedate" aria-hidden="true">#</a> <code>ifModifiedSinceDate()</code></h3>`,2),q={href:"https://www.php.net/manual/en/class.datetimeinterface",target:"_blank",rel:"noopener noreferrer"},M=n("code",null,"DateTime",-1),H={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Modified-Since",target:"_blank",rel:"noopener noreferrer"},S=n("code",null,"If-Modified-Since",-1),$=n("code",null,"null",-1),I=c(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$datetime</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">ifModifiedSinceDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$datetime</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...remaining not shown ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),D=n("strong",null,"Note",-1),N=n("code",null,"null",-1),U=n("code",null,"GET",-1),C=n("code",null,"HEAD",-1),P=n("code",null,"If-None-Match",-1),W={href:"https://httpwg.org/specs/rfc9110.html#field.if-modified-since",target:"_blank",rel:"noopener noreferrer"},z=n("h3",{id:"ifunmodifiedsincedate",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ifunmodifiedsincedate","aria-hidden":"true"},"#"),s(),n("code",null,"ifUnmodifiedSinceDate()")],-1),F={href:"https://www.php.net/manual/en/class.datetimeinterface",target:"_blank",rel:"noopener noreferrer"},G=n("code",null,"DateTime",-1),O={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Unmodified-Since",target:"_blank",rel:"noopener noreferrer"},V=n("code",null,"If-Unmodified-Since",-1),A=n("code",null,"null",-1),B=c(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$datetime</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">ifUnmodifiedSinceDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$datetime</span> <span class="token keyword">instanceof</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\\</span>DateTimeInterface</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...remaining not shown ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),L=n("strong",null,"Note",-1),j=n("code",null,"null",-1),J=n("code",null,"If-Match",-1),K={href:"https://httpwg.org/specs/rfc9110.html#field.if-unmodified-since",target:"_blank",rel:"noopener noreferrer"},Q=n("h3",{id:"ifrangeetagordate",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ifrangeetagordate","aria-hidden":"true"},"#"),s(),n("code",null,"ifRangeEtagOrDate()")],-1),X={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Range",target:"_blank",rel:"noopener noreferrer"},Y=n("code",null,"If-Range",-1),Z={href:"https://httpwg.org/specs/rfc9110.html#http.date",target:"_blank",rel:"noopener noreferrer"},nn={href:"https://httpwg.org/specs/rfc9110.html#field.etag",target:"_blank",rel:"noopener noreferrer"},sn=n("code",null,"ifRangeEtagOrDate()",-1),an={href:"https://www.php.net/manual/en/class.datetimeinterface",target:"_blank",rel:"noopener noreferrer"},en=n("code",null,"DateTime",-1),tn=n("li",null,[n("code",null,"ETag"),s(" instance")],-1),on=n("code",null,"null",-1),cn=n("code",null,"If-Range",-1),pn=n("code",null,"Range",-1),ln={href:"https://httpwg.org/specs/rfc9110.html#field.if-range",target:"_blank",rel:"noopener noreferrer"},rn=c(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>Contracts<span class="token punctuation">\\</span>ETags<span class="token punctuation">\\</span>ETag</span><span class="token punctuation">;</span>

<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">ifRangeEtagOrDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$value</span> <span class="token keyword">instanceof</span> <span class="token class-name">ETag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... not shown ...</span>
<span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token variable">$value</span> <span class="token keyword">instanceof</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\\</span>DateTimeInterface</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... not shown ...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// &quot;If-Range&quot; was not requested, or &quot;Range&quot; header was not set...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="response-macros" tabindex="-1"><a class="header-anchor" href="#response-macros" aria-hidden="true">#</a> Response Macros</h2><h3 id="withetag" tabindex="-1"><a class="header-anchor" href="#withetag" aria-hidden="true">#</a> <code>withEtag()</code></h3>`,3),dn=n("code",null,"withEtag()",-1),un={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag",target:"_blank",rel:"noopener noreferrer"},hn=n("code",null,"ETag",-1),kn=n("code",null,"ETag",-1),mn=n("strong",null,"Note",-1),fn={href:"https://symfony.com/doc/current/components/http_foundation.html#managing-the-http-cache",target:"_blank",rel:"noopener noreferrer"},gn=n("code",null,"setEtag()",-1),vn=c(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Aedart<span class="token punctuation">\\</span>ETags<span class="token punctuation">\\</span>Facades<span class="token punctuation">\\</span>Generator</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Http<span class="token punctuation">\\</span>Response</span><span class="token punctuation">;</span>

<span class="token variable">$etag</span> <span class="token operator">=</span> <span class="token class-name static-context">Generator</span><span class="token operator">::</span><span class="token function">makeStrong</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;my-content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">withEtag</span><span class="token punctuation">(</span><span class="token variable">$etag</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="withoutetag" tabindex="-1"><a class="header-anchor" href="#withoutetag" aria-hidden="true">#</a> <code>withoutEtag()</code></h3><p>If you need to remove a response&#39;s <code>ETag</code> Http header, use the <code>withoutEtag()</code>.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$response</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">withEtag</span><span class="token punctuation">(</span><span class="token variable">$etag</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Later in your application - remove ETag</span>
<span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">withoutEtag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="withcache" tabindex="-1"><a class="header-anchor" href="#withcache" aria-hidden="true">#</a> <code>withCache()</code></h3>`,5),_n=n("code",null,"withCache()",-1),bn={href:"https://symfony.com/doc/current/components/http_foundation.html#managing-the-http-cache",target:"_blank",rel:"noopener noreferrer"},wn=n("code",null,"setCache()",-1),Tn=n("code",null,"ETag",-1),En=c(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$etag</span> <span class="token operator">=</span> <span class="token class-name static-context">Generator</span><span class="token operator">::</span><span class="token function">makeStrong</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;my-content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">withCache</span><span class="token punctuation">(</span>
        <span class="token argument-name">etag</span><span class="token punctuation">:</span> <span class="token variable">$etag</span><span class="token punctuation">,</span>
        <span class="token argument-name">lastModified</span><span class="token punctuation">:</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addHours</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addSeconds</span><span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">private</span><span class="token punctuation">:</span> <span class="token constant boolean">true</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function yn(xn,Rn){const e=p("ExternalLinkIcon"),t=p("router-link");return l(),r("div",null,[u,n("p",null,[s("When this package's service provider is registered, it installs a few "),n("a",h,[s("Http Request & Response Macros"),a(e)]),s(". These provide, among other, some shortcut methods to obtain etags from "),n("a",k,[s("conditional headers"),a(e)]),s(" or to set cache headers with an etag.")]),n("nav",m,[n("ul",null,[n("li",null,[a(t,{to:"#request-macros"},{default:o(()=>[s("Request Macros")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#ifmatchetags"},{default:o(()=>[s("ifMatchEtags()")]),_:1})]),n("li",null,[a(t,{to:"#ifnonematchetags"},{default:o(()=>[s("ifNoneMatchEtags()")]),_:1})]),n("li",null,[a(t,{to:"#ifmodifiedsincedate"},{default:o(()=>[s("ifModifiedSinceDate()")]),_:1})]),n("li",null,[a(t,{to:"#ifunmodifiedsincedate"},{default:o(()=>[s("ifUnmodifiedSinceDate()")]),_:1})]),n("li",null,[a(t,{to:"#ifrangeetagordate"},{default:o(()=>[s("ifRangeEtagOrDate()")]),_:1})])])]),n("li",null,[a(t,{to:"#response-macros"},{default:o(()=>[s("Response Macros")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#withetag"},{default:o(()=>[s("withEtag()")]),_:1})]),n("li",null,[a(t,{to:"#withoutetag"},{default:o(()=>[s("withoutEtag()")]),_:1})]),n("li",null,[a(t,{to:"#withcache"},{default:o(()=>[s("withCache()")]),_:1})])])])])]),f,g,n("p",null,[s("The "),v,s(" returns a collection or "),_,s(" instances, from the "),n("a",b,[w,s(" Http header"),a(e)]),s(".")]),T,n("p",null,[s("Returns a collection or "),E,s(" instances, from the "),n("a",y,[x,s(" Http header"),a(e)]),s(".")]),R,n("p",null,[s("Returns a "),n("a",q,[M,a(e)]),s(" instance of the "),n("a",H,[S,s(" Http header"),a(e)]),s(", or "),$,s(" if not set.")]),I,n("p",null,[D,s(": "),n("em",null,[s("The method will return "),N,s(" if the HTTP Method is not "),U,s(" or "),C,s(", or if the request contains an "),P,s(" header. See "),n("a",W,[s("RFC-9110"),a(e)]),s(" for additional information.")])]),z,n("p",null,[s("Returns a "),n("a",F,[G,a(e)]),s(" instance of the "),n("a",O,[V,s(" Http header"),a(e)]),s(", or "),A,s(" if not set.")]),B,n("p",null,[L,s(": "),n("em",null,[s("The method will return "),j,s(" if the request contains an "),J,s(" header. See "),n("a",K,[s("RFC-9110"),a(e)]),s(" for additional information.")])]),Q,n("p",null,[s("The "),n("a",X,[Y,s(" Http header"),a(e)]),s(" is slightly special. It can contain an "),n("a",Z,[s("HTTP-Date"),a(e)]),s(" or an "),n("a",nn,[s("ETag value"),a(e)]),s(". Therefore, the "),sn,s(" method will return one of the following:")]),n("ul",null,[n("li",null,[n("a",an,[en,a(e)]),s(" instance")]),tn,n("li",null,[on,s(" ("),n("em",null,[s("if the "),cn,s(" header was not set, or if request does not contain a "),pn,s(" header. See "),n("a",ln,[s("RFC-9110"),a(e)]),s(" for additional information")]),s(").")])]),rn,n("p",null,[s("The "),dn,s(" method allows you to set the "),n("a",un,[hn,s(" Http header"),a(e)]),s(", from an "),kn,s(" instance. "),mn,s(": "),n("em",null,[s("This method is an adaptation of Symfony's "),n("a",fn,[gn,a(e)]),s(".")])]),vn,n("p",null,[s("The "),_n,s(" method is an adapted version of Symfony's "),n("a",bn,[wn,a(e)]),s(", that allows an "),Tn,s(" instance to be specified, along with the rest of the cache headers.")]),En])}const Mn=i(d,[["render",yn],["__file","macros.html.vue"]]);export{Mn as default};
